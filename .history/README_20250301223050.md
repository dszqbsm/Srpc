# Srpc

手写rpc项目

## 学习笔记

rpc远程过程调用是一种通信协议，允许调用不同进程空间的程序。

1. restful接口需要额外的定义，而rpc调用更接近于直接调用
2. 基于http协议的restful报文冗余，承载了过多无效信息，rpc使用自定义的协议格式，减少冗余报文
3. rpc采用更高效的序列化协议，将文本转为二进制传输
4. rpc灵活，更容易扩展和集成诸如注册中心、负载均衡等功能

rpc框架解决的问题：确定传输协议、报文编码格式、可用性问题（连接超时、异步请求和并发）、当服务端实例很多时，客户端只关心能否获取到期待的结果，因此需要注册中心和负载均衡，注册中心还需要实现服务动态添加、删除，使用心跳确保服务处于可用状态等功能；而当服务端没有统一的rpc框架时，就需要实现消息编解码、连接池、收发线程、超时处理等业务之外的重复技术劳动，即是rpc框架所需要具备的能力

grpc、rpcx、go-micro都是成熟的rpc框架

Srpc只实现rpc框架中最为重要的部分，从零实现go语言官方的标准库net/rpc，并新增了协议交换、注册中心、服务发现、负载均衡、超时处理等特性

使用encoding/gob实现消息的编解码，即序列化与反序列化，并实现一个建议的服务端，仅接受消息，不处理